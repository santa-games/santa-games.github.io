{"version":3,"sources":["components/Users.js","tools.js","components/charts/doughnut_chart.js","components/User.js","components/Games.js","components/games/tictactoe.js","components/Game.js","App.js","index.js"],"names":["Users","state","user_id","this","setState","undefined","redirect","to","class","scope","props","users","map","user","key","onClick","handleClick","user_name","games_won","Component","convertStateIdToName","stateId","fetchJsonFrom","url","a","console","log","fetch","response","json","error","DoughnutChart","chartRef","createRef","myChart","data","labels","d","label","datasets","value","update","Chart","current","type","backgroundColor","colors","ref","User","contents","games_lost","className","title","Games","game_id","tableContents","games","game","game_state","host_user","guest_user","win_user","next_user","TicTacToe","w","h","svgElements","push","x1","x2","y1","y2","stroke","strokeWidth","i","symbol","r","cx","cy","Math","floor","fill","options","option","s","scx","scy","e","ecx","ecy","width","height","Game","timerID","setInterval","clearInterval","hostPlaysFirst","host_plays_first","host_user_name","guest_user_name","game_state_id","datetime_created","number_of_turns","next_user_id","host_user_id","App","sort","b","find","guest_user_id","win_user_id","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","path","render","parseInt","match","params","ReactDOM","document","getElementById"],"mappings":"oVAsCeA,E,4MAlCXC,MAAQ,G,0DAEIC,GACRC,KAAKC,SAAS,CAAE,SAAYF,M,+BAGtB,IAAD,OACL,YAA4BG,IAAxBF,KAAKF,MAAMK,SAA+B,kBAAC,IAAD,CAAUC,GAAI,UAAYJ,KAAKF,MAAMK,WAE/E,yBAAKE,MAAM,aACP,2CACA,2BAAOA,MAAM,qBACT,+BACI,4BACI,wBAAIC,MAAM,OAAV,MACA,wBAAIA,MAAM,OAAV,QACA,wBAAIA,MAAM,OAAV,SAGR,+BACKN,KAAKO,MAAMC,MAAMC,KAAI,SAACC,GAAD,OAClB,wBAAIC,IAAKD,EAAKX,QAASa,QAAS,kBAAM,EAAKC,YAAYH,EAAKX,WACxD,4BAAKW,EAAKX,SACV,4BAAKW,EAAKI,WACV,4BAAKJ,EAAKK,sB,GAzBtBC,aCHb,SAASC,EAAqBC,GACjC,OAAgB,IAAZA,EAAsB,WACV,IAAZA,EAAsB,SACV,IAAZA,EAAsB,YACV,IAAZA,EAAsB,UACV,IAAZA,EAAsB,YACnB,YAAYA,EAAQ,IAGxB,SAAeC,EAAtB,kC,4CAAO,WAA6BC,GAA7B,eAAAC,EAAA,sEAECC,QAAQC,IAAI,kBAAkBH,EAAI,KAFnC,SAGwBI,MAAMJ,GAH9B,cAGOK,EAHP,gBAIcA,EAASC,OAJvB,iFAOCJ,QAAQK,MAAR,MAPD,kBAQQ,IARR,2D,2CCwBQC,E,kDA7BP,WAAYrB,GAAQ,IAAD,8BACf,cAAMA,IACDsB,SAAWC,sBAFD,E,iEAMf9B,KAAK+B,QAAQC,KAAKC,OAASjC,KAAKO,MAAMyB,KAAKvB,KAAI,SAAAyB,GAAC,OAAIA,EAAEC,SACtDnC,KAAK+B,QAAQC,KAAKI,SAAS,GAAGJ,KAAOhC,KAAKO,MAAMyB,KAAKvB,KAAI,SAAAyB,GAAC,OAAIA,EAAEG,SAChErC,KAAK+B,QAAQO,W,0CAIbtC,KAAK+B,QAAU,IAAIQ,IAAMvC,KAAK6B,SAASW,QAAS,CAC5CC,KAAM,WACNT,KAAM,CACFC,OAAQjC,KAAKO,MAAMyB,KAAKvB,KAAI,SAAAyB,GAAC,OAAIA,EAAEC,SACnCC,SAAU,CAAC,CACPJ,KAAMhC,KAAKO,MAAMyB,KAAKvB,KAAI,SAAAyB,GAAC,OAAIA,EAAEG,SACjCK,gBAAiB1C,KAAKO,MAAMoC,c,+BAOxC,OAAO,4BAAQC,IAAK5C,KAAK6B,e,GA1BRb,aCwDd6B,E,4MAvDX/C,MAAQ,CACJ,UAAQI,G,2MAKeiB,EAAc,mDAAmDnB,KAAKO,MAAMR,S,OAAzFW,E,OACNV,KAAKC,SAAS,CAAE,KAAQS,I,gDAGxBY,QAAQC,IAAR,M,8IAKJ,IAAIuB,EACJ,QAAwB5C,IAApBF,KAAKF,MAAMY,KAAoBoC,EAAW,wDAE9C,CACI,IAAId,EAAO,CACP,CAAE,MAAU,MAAO,MAAUhC,KAAKF,MAAMY,KAAKK,WAC7C,CAAE,MAAU,OAAQ,MAAUf,KAAKF,MAAMY,KAAKqC,aAGlDD,EACI,yBAAKE,UAAU,aACX,4BAAKhD,KAAKF,MAAMY,KAAKI,WACrB,uCACA,2BAAOT,MAAM,kBACT,+BACI,4BAAI,uCAAgB,4BAAKL,KAAKF,MAAMY,KAAKX,UACzC,4BAAI,yCAAkB,4BAAKC,KAAKF,MAAMY,KAAKI,cAGnD,qCACA,2BAAOT,MAAM,kBACT,+BACI,4BAAI,4CAAqB,4BAAKL,KAAKF,MAAMY,KAAKqC,WAAa/C,KAAKF,MAAMY,KAAKK,YAC3E,4BAAI,yCAAkB,4BAAKf,KAAKF,MAAMY,KAAKK,YAC3C,4BAAI,0CAAmB,4BAAKf,KAAKF,MAAMY,KAAKqC,eAIxD,qCACA,kBAAC,EAAD,CACIf,KAAMA,EACNiB,MAAM,WACNN,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,cAI5E,OAAQ,6BAAMG,O,GApDH9B,aC6CJkC,E,4MA5CXpD,MAAQ,G,0DAEIqD,GACRnD,KAAKC,SAAS,CAAE,SAAYkD,M,+BAGtB,IAGFC,EAHC,OACL,YAA4BlD,IAAxBF,KAAKF,MAAMK,SAA+B,kBAAC,IAAD,CAAUC,GAAI,UAAYJ,KAAKF,MAAMK,YAG/CiD,OAAXlD,IAArBF,KAAKO,MAAM8C,MAAsC,kDAEjCrD,KAAKO,MAAM8C,MAAM5C,KAAI,SAAC6C,GAAD,OACjC,wBAAI3C,IAAK2C,EAAKH,QAASvC,QAAS,kBAAM,EAAKC,YAAYyC,EAAKH,WACxD,4BAAKG,EAAKH,SACV,4BAAKG,EAAKC,YACV,4BAAKD,EAAKE,WACV,4BAAKF,EAAKG,YACV,4BAAKH,EAAKI,UACV,4BAAKJ,EAAKK,eAKlB,yBAAKtD,MAAM,aACP,qCACA,2BAAOA,MAAM,qBACT,+BACI,4BACI,wBAAIC,MAAM,OAAV,MACA,wBAAIA,MAAM,OAAV,SACA,wBAAIA,MAAM,OAAV,QACA,wBAAIA,MAAM,OAAV,SACA,wBAAIA,MAAM,OAAV,UACA,wBAAIA,MAAM,OAAV,UAGR,+BAAQ8C,U,GAtCRpC,aCmEL4C,E,uKAjEP,GAAwB,OAApB5D,KAAKO,MAAMyB,KAAe,OAAO,KACrC,IAAI6B,EAAI,IACJC,EAAI,IACJnD,EAAI,EAGFoD,EAAc,GACpBA,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAIJ,EAAGK,GAAIL,EAAGM,GAAG,IAAIC,GAAI,IAAKC,OAAO,QAAQC,YAHjE,KAIhBP,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAI,IAAKC,GAAI,IAAKC,GAAG,IAAIC,GAAI,IAAKC,OAAO,QAAQC,YAJrE,KAKhBP,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAG,IAAIC,GAAI,IAAKC,GAAIL,EAAGM,GAAIN,EAAGO,OAAO,QAAQC,YALjE,KAMhBP,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAG,IAAIC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,OAAO,QAAQC,YANrE,KAQhB,IAAI,IAAIC,EAAE,EAAEA,EAAE,EAAEA,IAAK,CACjB,IAAIC,EAASxE,KAAKO,MAAMyB,KAAKuC,GAGzBE,EAAIZ,GACJa,GAHIH,EAAI,EAGA,IAAKV,EACbc,GAHIC,KAAKC,MAAMN,EAAI,GAAK,EAGhB,IAAKT,EAEF,MAAXU,GACAT,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAIS,EAAGD,EAAGP,GAAIQ,EAAGD,EAAGN,GAAIQ,EAAGF,EAAGL,GAAIO,EAAGF,EAAGJ,OAAO,QAAQC,YAjBnF,KAkBRP,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAIS,EAAGD,EAAGP,GAAIQ,EAAGD,EAAGN,GAAIQ,EAAGF,EAAGL,GAAIO,EAAGF,EAAGJ,OAAO,QAAQC,YAlBnF,MAoBQ,MAAXE,GACLT,EAAYC,KAAM,4BAAQrD,IAAKA,IAAO+D,GAAIA,EAAIC,GAAIA,EAAIF,EAAGA,EAAGJ,OAAO,QAAQS,KAAK,QAAQR,YArBhF,KA0BhB,IAAMS,EAAU,CACZ,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAEX,IAAK,IAAIR,KAAKQ,EAAS,CACnB,IAAIC,EAASD,EAAQR,GACjBC,EAASxE,KAAKO,MAAMyB,KAAKgD,EAAO,IACpC,GAAe,MAAXR,IACAxE,KAAKO,MAAMyB,KAAKgD,EAAO,MAAQR,GAC/BxE,KAAKO,MAAMyB,KAAKgD,EAAO,MAAQR,GAAnC,CAEA,IAAIS,EAAID,EAAO,GAGXE,GAFKD,EAAI,EAEC,IAAKpB,EACfsB,GAFKP,KAAKC,MAAMI,EAAI,GAAK,EAEf,IAAKnB,EAEfsB,EAAIJ,EAAO,GAGXK,GAFKD,EAAI,EAEC,IAAKvB,EACfyB,GAFKV,KAAKC,MAAMO,EAAI,GAAK,EAEf,IAAKtB,EAEnBC,EAAYC,KAAM,0BAAMrD,IAAKA,IAAOsD,GAAIiB,EAAKhB,GAAImB,EAAKlB,GAAIgB,EAAKf,GAAIkB,EAAKjB,OAAO,MAAMC,YAAY,QAErG,OAAQ,yBAAKjE,MAAM,iBAAiBkF,MAAO,IAAKC,OAAQ,KAAMzB,O,GAhE9C/C,aC0ETyE,E,4MAvEX3F,MAAQ,CACJ,UAAQI,G,uMAIFF,KAAKsC,S,OACXtC,KAAK0F,QAAUC,YAAW,sBAAC,sBAAAtE,EAAA,sEAAkB,EAAKiB,SAAvB,mFAAiC,K,mJAI5DsD,cAAc5F,KAAK0F,W,+JAIAvE,EAAc,mDAAmDnB,KAAKO,MAAM4C,S,OAAzFG,E,OACNtD,KAAKC,SAAS,CAAE,KAAQqD,I,qIAIxB,IAAIR,EACJ,QAAwB5C,IAApBF,KAAKF,MAAMwD,KAAoBR,EAAW,wDAE9C,CACI,IAAI+C,OAAsD3F,IAArCF,KAAKF,MAAMwD,KAAKwC,kBAAuE,OAArC9F,KAAKF,MAAMwD,KAAKwC,iBACvFhD,EACI,yBAAKE,UAAU,aACX,qCAAWhD,KAAKF,MAAMwD,KAAKH,QAA3B,oBAAqDnD,KAAKF,MAAMwD,KAAKyC,eAArE,OAA6H,OAApC/F,KAAKF,MAAMwD,KAAK0C,gBAA2B,QAAUhG,KAAKF,MAAMwD,KAAK0C,iBAC9J,qCACA,2BAAO3F,MAAM,kBACT,+BACI,4BACI,sCACA,4BAAKY,EAAqBjB,KAAKF,MAAMwD,KAAK2C,iBAE9C,4BACI,uCACA,4BAAKjG,KAAKF,MAAMwD,KAAK4C,qBAKjC,uCACA,2BAAO7F,MAAM,kBACT,+BACI,4BACI,wCACA,4BAAKwF,EAAiB,IAAO7F,KAAKF,MAAMwD,KAAKwC,iBAAmB9F,KAAKF,MAAMwD,KAAKyC,eAAiB/F,KAAKF,MAAMwD,KAAK0C,kBAErH,4BACI,wCACA,4BAAKH,EAAiB,IAAQ7F,KAAKF,MAAMwD,KAAKwC,iBAAoD9F,KAAKF,MAAMwD,KAAK0C,gBAAjDhG,KAAKF,MAAMwD,KAAKyC,iBAErF,4BACI,qCACA,4BAAK/F,KAAKF,MAAMwD,KAAK6C,kBAEzB,4BACI,2CACA,4BAAuC,OAAjCnG,KAAKF,MAAMwD,KAAK8C,aAAwB,IAAOpG,KAAKF,MAAMwD,KAAK8C,eAAiBpG,KAAKF,MAAMwD,KAAK+C,aAAerG,KAAKF,MAAMwD,KAAKyC,eAAiB/F,KAAKF,MAAMwD,KAAK0C,oBAIlL,qCACA,kBAAC,EAAD,CAAWhE,KAAMhC,KAAKF,MAAMwD,KAAKtB,QAI7C,OAAQ,6BAAMc,O,GApEH9B,aC6EJsF,G,wNAjEXxG,MAAQ,CACJ,MAAS,I,mNAKeqB,EAAc,mD,cAA5BX,E,gBACcW,EAAc,mD,OAA5BkC,E,OAEN7C,EAAM+F,MAAK,SAAUlF,EAAGmF,GAAK,OAAOA,EAAEzF,UAAYM,EAAEN,aACpDsC,EAAMkD,MAAK,SAAUlF,EAAGmF,GAAK,OAAOA,EAAErD,QAAU9B,EAAE8B,W,cAElCE,G,IAAhB,I,iBAAQC,E,QACJA,EAAKC,WAAatC,EAAqBqC,EAAK2C,eAC5C3C,EAAKE,UAAkC,OAAtBF,EAAK+C,aAAwB7F,EAAMiG,MAAK,SAAA/F,GAAI,OAAIA,EAAKX,UAAYuD,EAAK+C,gBAAcvF,UAAY,IACjHwC,EAAKG,WAAoC,OAAvBH,EAAKoD,cAAyBlG,EAAMiG,MAAK,SAAA/F,GAAI,OAAIA,EAAKX,UAAYuD,EAAKoD,iBAAe5F,UAAY,IACpHwC,EAAKK,UAAkC,OAAtBL,EAAK8C,aAAwB5F,EAAMiG,MAAK,SAAA/F,GAAI,OAAIA,EAAKX,UAAYuD,EAAK8C,gBAActF,UAAY,IACjHwC,EAAKI,SAAgC,OAArBJ,EAAKqD,YAAuBnG,EAAMiG,MAAK,SAAA/F,GAAI,OAAIA,EAAKX,UAAYuD,EAAKqD,eAAa7F,UAAY,KAL9G,EAAJ,qBAAwB,I,8BAQxBd,KAAKC,SAAS,CAAE,MAASO,EAAO,MAAU6C,I,kDAG1C/B,QAAQC,IAAR,M,+IAOJ,OACI,6BACI,kBAAC,IAAD,KACI,6BACI,yBAAKyB,UAAU,+CACX,uBAAGA,UAAU,eAAe4D,KAAK,KAAjC,eACA,4BAAQ5D,UAAU,iBAAiBP,KAAK,SAASoE,cAAY,WACzDC,cAAY,aACZC,gBAAc,YAAYC,gBAAc,QAAQC,aAAW,qBAC3D,0BAAMjE,UAAU,yBAEpB,yBAAKA,UAAU,2BAA2BkE,GAAG,aACzC,wBAAIlE,UAAU,sBACV,wBAAIA,UAAU,YACV,kBAAC,IAAD,CAAM3C,MAAM,WAAWD,GAAG,KAA1B,gBAEJ,wBAAI4C,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAW5C,GAAG,UAA9B,aAKhB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO+G,KAAK,kBAAkBC,OAAQ,SAAC7G,GAAD,OAAY,kBAAC,EAAD,CAAMR,QAASsH,SAAS9G,EAAM+G,MAAMC,OAAOxH,cAC7F,kBAAC,IAAD,CAAOoH,KAAK,kBAAkBC,OAAQ,SAAC7G,GAAD,OAAY,kBAAC,EAAD,CAAM4C,QAASkE,SAAS9G,EAAM+G,MAAMC,OAAOpE,cAC7F,kBAAC,IAAD,CAAOgE,KAAK,UAAS,kBAAC,EAAD,CAAO9D,MAAOrD,KAAKF,MAAMuD,SAC9C,kBAAC,IAAD,CAAO8D,KAAK,KAAI,kBAAC,EAAD,CAAO3G,MAAOR,KAAKF,MAAMU,iB,GAzDnDQ,cCVlBwG,IAASJ,OAAO,kBAAC,EAAD,MAASK,SAASC,eAAe,W","file":"static/js/main.aa29f9ed.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Users extends Component {\r\n    state = {}\r\n\r\n    handleClick(user_id) {\r\n        this.setState({ \"redirect\": user_id })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect !== undefined) return <Redirect to={'/users/' + this.state.redirect} />\r\n        return (\r\n            <div class=\"container\">\r\n                <h3>Leaderboard</h3>\r\n                <table class=\"table table-hover\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">ID</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Won</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.props.users.map((user) => (\r\n                            <tr key={user.user_id} onClick={() => this.handleClick(user.user_id)}>\r\n                                <td>{user.user_id}</td>\r\n                                <td>{user.user_name}</td>\r\n                                <td>{user.games_won}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Users;","export function convertStateIdToName(stateId) {\r\n    if (stateId === 0) return \"Proposed\"\r\n    if (stateId === 1) return \"Active\"\r\n    if (stateId === 2) return \"Completed\"\r\n    if (stateId === 3) return \"Forfeit\"\r\n    if (stateId === 4) return \"Cancelled\"\r\n    return \"Unknown [\"+stateId+\"]\"\r\n}\r\n\r\nexport async function fetchJsonFrom(url) {\r\n    try {\r\n        console.log(\"Fetching from [\"+url+\"]\");\r\n        const response = await fetch(url);\r\n        return await response.json();\r\n    }\r\n    catch (error) {\r\n        console.error(error)\r\n        return {};\r\n    }\r\n}","import React, { Component, createRef } from 'react';\r\nimport Chart from 'chart.js'\r\n\r\nclass DoughnutChart  extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.chartRef = createRef();\r\n        }\r\n    \r\n        componentDidUpdate() {\r\n            this.myChart.data.labels = this.props.data.map(d => d.label);\r\n            this.myChart.data.datasets[0].data = this.props.data.map(d => d.value);\r\n            this.myChart.update();\r\n        }\r\n    \r\n        componentDidMount() {\r\n            this.myChart = new Chart(this.chartRef.current, {\r\n                type: 'doughnut',\r\n                data: {\r\n                    labels: this.props.data.map(d => d.label),\r\n                    datasets: [{\r\n                        data: this.props.data.map(d => d.value),\r\n                        backgroundColor: this.props.colors\r\n                    }]\r\n                }\r\n            });\r\n        }\r\n    \r\n        render() {\r\n            return <canvas ref={this.chartRef} />;\r\n    }\r\n}\r\n\r\nexport default DoughnutChart;","import React, { Component } from 'react';\r\nimport { fetchJsonFrom } from '../tools.js'\r\nimport DoughnutChart from \"./charts/doughnut_chart\"\r\nclass User extends Component {\r\n    state = {\r\n        \"user\": undefined,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const user = await fetchJsonFrom(\"https://santa-games.azurewebsites.net/api/users/\"+this.props.user_id)\r\n            this.setState({ \"user\": user });\r\n        }\r\n        catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let contents;\r\n        if (this.state.user === undefined) contents = <h5>Loading user data...</h5>\r\n        else\r\n        {\r\n            let data = [\r\n                { \"label\" : \"Won\", \"value\" : this.state.user.games_won },\r\n                { \"label\" : \"Lost\", \"value\" : this.state.user.games_lost }\r\n            ]\r\n\r\n            contents = (\r\n                <div className=\"container\">\r\n                    <h3>{this.state.user.user_name}</h3>\r\n                    <h5>Details</h5>\r\n                    <table class=\"table table-sm\">\r\n                        <tbody>\r\n                            <tr><td>User ID</td><td>{this.state.user.user_id}</td></tr>\r\n                            <tr><td>User Name</td><td>{this.state.user.user_name}</td></tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <h5>Stats</h5>\r\n                    <table class=\"table table-sm\">\r\n                        <tbody>\r\n                            <tr><td>Games Played</td><td>{this.state.user.games_lost + this.state.user.games_won}</td></tr>\r\n                            <tr><td>Games Won</td><td>{this.state.user.games_won}</td></tr>\r\n                            <tr><td>Games Lost</td><td>{this.state.user.games_lost}</td></tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                <h5>Stats</h5>\r\n                <DoughnutChart\r\n                    data={data}\r\n                    title=\"Won/Lost\"\r\n                    colors={['#a8e0ff', '#8ee3f5', '#70cad1', '#3e517a', '#b08ea2', '#BBB6DF']}/>\r\n                </div>\r\n            )\r\n        }\r\n        return (<div>{contents}</div>)\r\n    }\r\n}\r\n\r\nexport default User;","import React, { Component } from 'react'\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Games extends Component {\r\n    state = {}\r\n\r\n    handleClick(game_id) {\r\n        this.setState({ \"redirect\": game_id })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect !== undefined) return <Redirect to={'/games/' + this.state.redirect} />\r\n\r\n        let tableContents;\r\n        if (this.props.games === undefined) tableContents = (<p>No games to display</p>)\r\n        else {\r\n            tableContents = this.props.games.map((game) => (\r\n                <tr key={game.game_id} onClick={() => this.handleClick(game.game_id)}>\r\n                    <td>{game.game_id}</td>\r\n                    <td>{game.game_state}</td>\r\n                    <td>{game.host_user}</td>\r\n                    <td>{game.guest_user}</td>\r\n                    <td>{game.win_user}</td>\r\n                    <td>{game.next_user}</td>\r\n                </tr>\r\n            ))\r\n        }\r\n        return (\r\n            <div class=\"container\">\r\n                <h3>Games</h3>\r\n                <table class=\"table table-hover\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">ID</th>\r\n                            <th scope=\"col\">State</th>\r\n                            <th scope=\"col\">Host</th>\r\n                            <th scope=\"col\">Guest</th>\r\n                            <th scope=\"col\">Winner</th>\r\n                            <th scope=\"col\">Next</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>{tableContents}</tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Games;","import React, { Component } from 'react';\r\n\r\nclass TicTacToe extends Component {\r\n\r\n    render() {\r\n        if (this.props.data === null) return null;\r\n        let w = 100;\r\n        let h = 100;\r\n        let key=0;\r\n        let strokeWidth=1;\r\n        \r\n        const svgElements = []\r\n        svgElements.push((<line key={key++} x1={w} x2={w} y1=\"0\" y2={3*h} stroke=\"black\" strokeWidth={strokeWidth}/>));\r\n        svgElements.push((<line key={key++} x1={2*w} x2={2*w} y1=\"0\" y2={3*h} stroke=\"black\" strokeWidth={strokeWidth}/>));\r\n        svgElements.push((<line key={key++} x1=\"0\" x2={3*w} y1={h} y2={h} stroke=\"black\" strokeWidth={strokeWidth}/>));\r\n        svgElements.push((<line key={key++} x1=\"0\" x2={3*w} y1={2*h} y2={2*h} stroke=\"black\" strokeWidth={strokeWidth}/>));\r\n        \r\n        for(let i=0;i<9;i++) {\r\n            let symbol = this.props.data[i];\r\n            let x = i % 3;\r\n            let y = Math.floor(i / 3) % 3;\r\n            let r = w/2*0.8;\r\n            let cx = (x+0.5)*w;\r\n            let cy = (y+0.5)*h;\r\n\r\n            if (symbol === \"X\") {\r\n                svgElements.push((<line key={key++} x1={cx-r} x2={cx+r} y1={cy+r} y2={cy-r} stroke=\"black\" strokeWidth={strokeWidth}/>))\r\n                svgElements.push((<line key={key++} x1={cx-r} x2={cx+r} y1={cy-r} y2={cy+r} stroke=\"black\" strokeWidth={strokeWidth}/>))\r\n            }  \r\n            else if (symbol === \"O\") {\r\n                svgElements.push((<circle key={key++} cx={cx} cy={cy} r={r} stroke=\"black\" fill=\"white\" strokeWidth={strokeWidth} />))\r\n            } \r\n        }   \r\n\r\n        // if any three in a row draw a winning line\r\n        const options = [\r\n            [0, 1, 2],\r\n            [3, 4, 5],\r\n            [6, 7, 8],\r\n            [0, 3, 6],\r\n            [1, 4, 7],\r\n            [2, 5, 8],\r\n            [0, 4, 8],\r\n            [2, 4, 6],\r\n        ]\r\n        for (let i in options) {\r\n            let option = options[i];\r\n            let symbol = this.props.data[option[0]];\r\n            if (symbol === \" \") continue;\r\n            if (this.props.data[option[1]] !== symbol) continue\r\n            if (this.props.data[option[2]] !== symbol) continue\r\n\r\n            let s = option[0];\r\n            let sx = s % 3;\r\n            let sy = Math.floor(s / 3) % 3;\r\n            let scx = (sx+0.5)*w;\r\n            let scy = (sy+0.5)*h;\r\n\r\n            let e = option[2];\r\n            let ex = e % 3;\r\n            let ey = Math.floor(e / 3) % 3;\r\n            let ecx = (ex+0.5)*w;\r\n            let ecy = (ey+0.5)*h;\r\n\r\n            svgElements.push((<line key={key++} x1={scx} x2={ecx} y1={scy} y2={ecy} stroke=\"red\" strokeWidth=\"3\"/>))\r\n        } \r\n        return (<svg class=\"border rounded\" width={3*w} height={3*h}>{svgElements}</svg>)\r\n    }\r\n}\r\n\r\nexport default TicTacToe; ","import React, { Component } from 'react';\r\nimport { convertStateIdToName, fetchJsonFrom } from \"../tools.js\"\r\nimport TicTacToe from \"./games/tictactoe.js\"\r\n\r\nclass Game extends Component {\r\n    state = {\r\n        \"game\": undefined,\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.update()\r\n        this.timerID = setInterval(async () => await this.update(), 5000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerID);\r\n    }\r\n\r\n    async update() {\r\n        const game = await fetchJsonFrom(\"https://santa-games.azurewebsites.net/api/games/\"+this.props.game_id);\r\n        this.setState({ \"game\": game });\r\n    }\r\n\r\n    render(){\r\n        let contents;\r\n        if (this.state.game === undefined) contents = <h5>Loading game data...</h5>\r\n        else\r\n        {\r\n            let hostPlaysFirst = this.state.game.host_plays_first === undefined || this.state.game.host_plays_first === null;\r\n            contents = (\r\n                <div className=\"container\">\r\n                    <h3>Game #{this.state.game.game_id} | Tic-Tac-Toe | {this.state.game.host_user_name} vs {this.state.game.guest_user_name === null ? \"[TBD]\" : this.state.game.guest_user_name}</h3>\r\n                    <h5>Stats</h5>\r\n                    <table class=\"table table-sm\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>Status</td>\r\n                                <td>{convertStateIdToName(this.state.game.game_state_id)}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Created</td>\r\n                                <td>{this.state.game.datetime_created}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <h5>Details</h5>\r\n                    <table class=\"table table-sm\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>Player 1</td>\r\n                                <td>{hostPlaysFirst ? \"-\" : (this.state.game.host_plays_first ? this.state.game.host_user_name : this.state.game.guest_user_name)}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Player 2</td>\r\n                                <td>{hostPlaysFirst ? \"-\" : (!this.state.game.host_plays_first ? this.state.game.host_user_name : this.state.game.guest_user_name)}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Turns</td>\r\n                                <td>{this.state.game.number_of_turns}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Next Player</td>\r\n                                <td>{ this.state.game.next_user_id === null ? \"-\" : (this.state.game.next_user_id === this.state.game.host_user_id ? this.state.game.host_user_name : this.state.game.guest_user_name)}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <h5>State</h5>\r\n                    <TicTacToe data={this.state.game.data} />\r\n                </div>\r\n            )\r\n        }\r\n        return (<div>{contents}</div>)\r\n    }\r\n}\r\n\r\nexport default Game;","import React, { Component } from 'react';\r\nimport {\r\n    HashRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n} from \"react-router-dom\";\r\nimport Users from './components/Users';\r\nimport User from './components/User';\r\nimport Games from './components/Games';\r\nimport Game from './components/Game';\r\nimport 'bootswatch/dist/flatly/bootstrap.min.css';\r\nimport './App.css';\r\nimport { convertStateIdToName, fetchJsonFrom } from \"./tools.js\"\r\n\r\nclass App extends Component {\r\n    state = {\r\n        \"users\": [],\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const users = await fetchJsonFrom(\"https://santa-games.azurewebsites.net/api/users\")\r\n            const games = await fetchJsonFrom('https://santa-games.azurewebsites.net/api/games');\r\n\r\n            users.sort(function (a, b) { return b.games_won - a.games_won; })\r\n            games.sort(function (a, b) { return b.game_id - a.game_id; })\r\n\r\n            for(let game of games) {\r\n                game.game_state = convertStateIdToName(game.game_state_id);\r\n                game.host_user = game.host_user_id !== null ? users.find(user => user.user_id === game.host_user_id).user_name : \"-\"\r\n                game.guest_user = game.guest_user_id !== null ? users.find(user => user.user_id === game.guest_user_id).user_name : \"-\"\r\n                game.next_user = game.next_user_id !== null ? users.find(user => user.user_id === game.next_user_id).user_name : \"-\"\r\n                game.win_user = game.win_user_id !== null ? users.find(user => user.user_id === game.win_user_id).user_name : \"-\"\r\n            }\r\n            \r\n            this.setState({ \"users\": users, \"games\" : games });\r\n        }\r\n        catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Router>\r\n                    <div>\r\n                        <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n                            <a className=\"navbar-brand\" href=\"/\">Santa-Games</a>\r\n                            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                                data-target=\"#navbarNav\"\r\n                                aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                                <span className=\"navbar-toggler-icon\"></span>\r\n                            </button>\r\n                            <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n                                <ul className=\"navbar-nav mr-auto\">\r\n                                    <li className=\"nav-item\">\r\n                                        <Link class=\"nav-link\" to=\"/\">Leaderboard</Link>\r\n                                    </li>\r\n                                    <li className=\"nav-item\">\r\n                                        <Link className=\"nav-link\" to=\"/games\">Games</Link>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </nav>\r\n                        <Switch>\r\n                            <Route path=\"/users/:user_id\" render={(props) => (<User user_id={parseInt(props.match.params.user_id)} />)}/>\r\n                            <Route path=\"/games/:game_id\" render={(props) => (<Game game_id={parseInt(props.match.params.game_id)} />)}/>\r\n                            <Route path=\"/games\"><Games games={this.state.games} /></Route>\r\n                            <Route path=\"/\"><Users users={this.state.users} /></Route>\r\n                        </Switch>\r\n                    </div>\r\n                </Router>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}